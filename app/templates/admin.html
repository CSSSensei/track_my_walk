{% extends "admin_base.html" %}

{% block title %}Admin Panel - Add Walk{% endblock %}
{% block admin_body_class %}admin-login-page{% endblock %}

{% block admin_head_libs %}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% endblock %}

{% block admin_content %}
    <div id="message" class="toast-message"></div>

    <div class="card">
        <h1>Добавить новую прогулку</h1>

        <div class="main-grid">
            <div>
                <div class="form-group">
                    <label for="name">Название прогулки</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="description">Описание</label>
                    <textarea id="description" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="walkDate">Дата и время прогулки</label>
                    <input type="datetime-local" id="walkDate" placeholder="Выберите дату и время">
                </div>
            </div>

            <div>
                <label for="coordinatesString">Ввести координаты строкой ([долгота, широта], [долгота, широта],...):</label>
                <textarea id="coordinatesString" rows="6" placeholder="Пример: [37.6176, 55.7512], [37.6200, 55.7530]"></textarea>
                <button id="parseCoordinatesBtn" type="button" style="margin-top: 10px;">Применить строку</button>
                <p style="font-size: 0.85em; color: gray; margin-top: 5px;">Долгота, широта заключены в квадратные скобки, геоточки разделяются запятыми</p>
            </div>
        </div>

        <label style="margin-bottom: 8px;">Нарисовать маршрут на карте:</label>
        <div id="map"></div>

        <div class="control-button-group">
            <button id="clearMapBtn" type="button">Очистить маршрут</button>
            <button id="removeLastPointBtn" type="button">Удалить последнюю точку</button>
        </div>

        <button id="submitWalkBtn" type="button" class="submit-button">Добавить прогулку</button>
    </div>

    <div class="admin-actions-bottom">
        <a href="{{ url_for('admin.walks_manager') }}" class="button">Управление прогулками</a>
        <a href="{{ url_for('admin.admin_logout') }}" class="logout-link">Выйти</a>
    </div>
{% endblock %}

{% block admin_scripts_libs %}
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
{% endblock %}

{% block admin_page_script %}
    <script src="{{ url_for('static', filename='js/admin_script.js') }}"></script>
{% endblock %}
